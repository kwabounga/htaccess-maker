<div class="card text-vscode bg-vscode mb-3 shadow-sm  border border-primary">
  <div class="card-header">Rules:</div>
  <div class="card-body p-2">
    <!-- Button trigger modal -->
    <button
      type="button"
      class="btn btn-primary"
      data-bs-toggle="modal"
      [attr.data-bs-target]="'#rules_modal_' + scope.id"
    >
      Manage {{ scope.label }} Rules
    </button>
  </div>
</div>

<!-- Modal -->
<div
  class="modal fade"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  id="rules_modal_{{ scope.id }}"
  tabindex="-1"
  [attr.aria-labelledby]="'#modal_label_' + scope.id"
  aria-hidden="true"
>
  <div class="modal-dialog modal-xl modal-fullscreen-lg-down">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modal_label_{{ scope.id }}">Rules for {{ scope.label }}</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <input class="form-control form-control-sm mb-3" type="text" placeholder="search" aria-label="search" title="search" (input)="onChangeSearchEvent($event)">
        <ul class="list-group border blocked-size-max">
          <smooth-dnd-container
            [dragClass]="'opacity-ghost'"
            [lockAxis]="'y'"
            [dragBeginDelay]="200"
            [dragHandleSelector]="'.column-drag-handle'"
            [dropClass]="'opacity-ghost-drop'"
            (drop)="onDrop($event)"
          >
            <smooth-dnd-draggable
              *ngFor="let rule of this?.filteredRules; let idr = index"
            >
              <div class="draggable-item">
                <app-rule-line
                  [id]="id"
                  [idr]="idr"
                  [isPartOftheSet]="this?.rulesSelectedSet?.set.includes(idr)"
                  [rule]="rule"
                  [redirectTypes]="redirectTypes"
                  (onChange)="changeSaveRule($event)"
                  (onCheck)="onCheck($event)"
                ></app-rule-line>
              </div>
            </smooth-dnd-draggable>
          </smooth-dnd-container>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button *ngIf="this.ruleFilter == ''" type="button" class="btn btn-primary" (click)="updateRulesPositions()">Save Positions Change</button>
      </div>
    </div>
  </div>
</div>
